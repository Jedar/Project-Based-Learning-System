(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"MV+G":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("fXoL");let o=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Nb({type:t,selectors:[["app-header-logo"]],decls:2,vars:0,consts:[[1,"logo"]],template:function(t,e){1&t&&(r.Zb(0,"span",0),r.Mc(1,"PBL\u9879\u76ee\u5f0f\u5b66\u4e60\u5e73\u53f0"),r.Yb())},styles:[".logo[_ngcontent-%COMP%]{width:240px;height:31px;margin:16px 28px 16px 0;padding:3px;float:left;color:#fff;text-align:center;font-size:1.875em;line-height:100%}"]}),t})()},cDKA:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("fXoL");let o=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Nb({type:t,selectors:[["app-footer-content"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Zb(0,"div"),r.Mc(1,"PBL platform \xa92020"),r.Yb())},styles:[""]}),t})()},kScs:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return t.hashStr=function(t,e){return void 0===e&&(e=!1),this.onePassHasher.start().appendStr(t).end(e)},t.hashAsciiStr=function(t,e){return void 0===e&&(e=!1),this.onePassHasher.start().appendAsciiStr(t).end(e)},t._hex=function(e){var n,r,o,i,s=t.hexChars,a=t.hexOut;for(i=0;i<4;i+=1)for(r=8*i,n=e[i],o=0;o<8;o+=2)a[r+1+o]=s.charAt(15&n),a[r+0+o]=s.charAt(15&(n>>>=4)),n>>>=4;return a.join("")},t._md5cycle=function(t,e){var n=t[0],r=t[1],o=t[2],i=t[3];r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&o)+e[1]-389564586|0)<<12|i>>>20)+n|0)&n|~i&r)+e[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&n)+e[3]-1044525330|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&o)+e[5]+1200080426|0)<<12|i>>>20)+n|0)&n|~i&r)+e[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&n)+e[7]-45705983|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&o)+e[9]-1958414417|0)<<12|i>>>20)+n|0)&n|~i&r)+e[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&n)+e[11]-1990404162|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&o)+e[13]-40341101|0)<<12|i>>>20)+n|0)&n|~i&r)+e[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&n)+e[15]+1236535329|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[1]-165796510|0)<<5|n>>>27)+r|0)&o|r&~o)+e[6]-1069501632|0)<<9|i>>>23)+n|0)&r|n&~r)+e[11]+643717713|0)<<14|o>>>18)+i|0)&n|i&~n)+e[0]-373897302|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[5]-701558691|0)<<5|n>>>27)+r|0)&o|r&~o)+e[10]+38016083|0)<<9|i>>>23)+n|0)&r|n&~r)+e[15]-660478335|0)<<14|o>>>18)+i|0)&n|i&~n)+e[4]-405537848|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[9]+568446438|0)<<5|n>>>27)+r|0)&o|r&~o)+e[14]-1019803690|0)<<9|i>>>23)+n|0)&r|n&~r)+e[3]-187363961|0)<<14|o>>>18)+i|0)&n|i&~n)+e[8]+1163531501|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[13]-1444681467|0)<<5|n>>>27)+r|0)&o|r&~o)+e[2]-51403784|0)<<9|i>>>23)+n|0)&r|n&~r)+e[7]+1735328473|0)<<14|o>>>18)+i|0)&n|i&~n)+e[12]-1926607734|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[5]-378558|0)<<4|n>>>28)+r|0)^r^o)+e[8]-2022574463|0)<<11|i>>>21)+n|0)^n^r)+e[11]+1839030562|0)<<16|o>>>16)+i|0)^i^n)+e[14]-35309556|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[1]-1530992060|0)<<4|n>>>28)+r|0)^r^o)+e[4]+1272893353|0)<<11|i>>>21)+n|0)^n^r)+e[7]-155497632|0)<<16|o>>>16)+i|0)^i^n)+e[10]-1094730640|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[13]+681279174|0)<<4|n>>>28)+r|0)^r^o)+e[0]-358537222|0)<<11|i>>>21)+n|0)^n^r)+e[3]-722521979|0)<<16|o>>>16)+i|0)^i^n)+e[6]+76029189|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[9]-640364487|0)<<4|n>>>28)+r|0)^r^o)+e[12]-421815835|0)<<11|i>>>21)+n|0)^n^r)+e[15]+530742520|0)<<16|o>>>16)+i|0)^i^n)+e[2]-995338651|0)<<23|r>>>9)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[0]-198630844|0)<<6|n>>>26)+r|0)|~o))+e[7]+1126891415|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[14]-1416354905|0)<<15|o>>>17)+i|0)|~n))+e[5]-57434055|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[12]+1700485571|0)<<6|n>>>26)+r|0)|~o))+e[3]-1894986606|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[10]-1051523|0)<<15|o>>>17)+i|0)|~n))+e[1]-2054922799|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[8]+1873313359|0)<<6|n>>>26)+r|0)|~o))+e[15]-30611744|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[6]-1560198380|0)<<15|o>>>17)+i|0)|~n))+e[13]+1309151649|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[4]-145523070|0)<<6|n>>>26)+r|0)|~o))+e[11]-1120210379|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[2]+718787259|0)<<15|o>>>17)+i|0)|~n))+e[9]-343485551|0)<<21|r>>>11)+o|0,t[0]=n+t[0]|0,t[1]=r+t[1]|0,t[2]=o+t[2]|0,t[3]=i+t[3]|0},t.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(t.stateIdentity),this},t.prototype.appendStr=function(e){var n,r,o=this._buffer8,i=this._buffer32,s=this._bufferLength;for(r=0;r<e.length;r+=1){if((n=e.charCodeAt(r))<128)o[s++]=n;else if(n<2048)o[s++]=192+(n>>>6),o[s++]=63&n|128;else if(n<55296||n>56319)o[s++]=224+(n>>>12),o[s++]=n>>>6&63|128,o[s++]=63&n|128;else{if((n=1024*(n-55296)+(e.charCodeAt(++r)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");o[s++]=240+(n>>>18),o[s++]=n>>>12&63|128,o[s++]=n>>>6&63|128,o[s++]=63&n|128}s>=64&&(this._dataLength+=64,t._md5cycle(this._state,i),s-=64,i[0]=i[16])}return this._bufferLength=s,this},t.prototype.appendAsciiStr=function(e){for(var n,r=this._buffer8,o=this._buffer32,i=this._bufferLength,s=0;;){for(n=Math.min(e.length-s,64-i);n--;)r[i++]=e.charCodeAt(s++);if(i<64)break;this._dataLength+=64,t._md5cycle(this._state,o),i=0}return this._bufferLength=i,this},t.prototype.appendByteArray=function(e){for(var n,r=this._buffer8,o=this._buffer32,i=this._bufferLength,s=0;;){for(n=Math.min(e.length-s,64-i);n--;)r[i++]=e[s++];if(i<64)break;this._dataLength+=64,t._md5cycle(this._state,o),i=0}return this._bufferLength=i,this},t.prototype.getState=function(){var t=this._state;return{buffer:String.fromCharCode.apply(null,this._buffer8),buflen:this._bufferLength,length:this._dataLength,state:[t[0],t[1],t[2],t[3]]}},t.prototype.setState=function(t){var e,n=t.buffer,r=t.state,o=this._state;for(this._dataLength=t.length,this._bufferLength=t.buflen,o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],e=0;e<n.length;e+=1)this._buffer8[e]=n.charCodeAt(e)},t.prototype.end=function(e){void 0===e&&(e=!1);var n,r=this._bufferLength,o=this._buffer8,i=this._buffer32,s=1+(r>>2);if(this._dataLength+=r,o[r]=128,o[r+1]=o[r+2]=o[r+3]=0,i.set(t.buffer32Identity.subarray(s),s),r>55&&(t._md5cycle(this._state,i),i.set(t.buffer32Identity)),(n=8*this._dataLength)<=4294967295)i[14]=n;else{var a=n.toString(16).match(/(.*?)(.{0,8})$/);if(null===a)return;var c=parseInt(a[2],16),l=parseInt(a[1],16)||0;i[14]=c,i[15]=l}return t._md5cycle(this._state,i),e?this._state:t._hex(this._state)},t.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),t.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),t.hexChars="0123456789abcdef",t.hexOut=[],t.onePassHasher=new t,t}();e.Md5=r,"5d41402abc4b2a76b9719d911017c592"!==r.hashStr("hello")&&console.error("Md5 self test failed.")},lBUW:function(t,e,n){"use strict";n.r(e),n.d(e,"AuthModule",(function(){return X}));var r=n("ofXK"),o=n("tyNb"),i=n("fXoL");let s=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Nb({type:t,selectors:[["app-example"]],decls:2,vars:0,template:function(t,e){1&t&&(i.Zb(0,"p"),i.Mc(1,"example works!"),i.Yb())},styles:[""]}),t})();var a=n("yW9e"),c=n("MV+G"),l=n("Q8cG"),u=n("C2AL"),h=n("yNE/"),m=n("B+r4"),b=n("cDKA");const d=function(){return["/","auth","student","login"]},p=function(){return["/","auth","teacher","login"]},f=function(){return["/","auth","manager","login"]};let g=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Nb({type:t,selectors:[["app-auth-main"]],decls:23,vars:6,consts:[["nz-menu","","nzTheme","dark","nzMode","horizontal"],["nzMatchRouter","","nz-menu-item",""],[3,"routerLink"],[1,"inner-content"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","16"],["src","/assets/image/pbl.jpg",1,"auth-image"],["nz-col","","nzSpan","8"]],template:function(t,e){1&t&&(i.Zb(0,"nz-layout"),i.Zb(1,"nz-header"),i.Ub(2,"app-header-logo"),i.Zb(3,"ul",0),i.Zb(4,"li",1),i.Zb(5,"a",2),i.Mc(6,"\u6211\u662f\u5b66\u751f"),i.Yb(),i.Yb(),i.Zb(7,"li",1),i.Zb(8,"a",2),i.Mc(9,"\u6211\u662f\u8001\u5e08"),i.Yb(),i.Yb(),i.Zb(10,"li",1),i.Zb(11,"a",2),i.Mc(12,"\u6211\u662f\u7ba1\u7406\u5458"),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Zb(13,"nz-content"),i.Ub(14,"nz-breadcrumb"),i.Zb(15,"div",3),i.Zb(16,"div",4),i.Zb(17,"div",5),i.Ub(18,"img",6),i.Yb(),i.Zb(19,"div",7),i.Ub(20,"router-outlet"),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Zb(21,"nz-footer"),i.Ub(22,"app-footer-content"),i.Yb(),i.Yb()),2&t&&(i.Db(5),i.sc("routerLink",i.wc(3,d)),i.Db(3),i.sc("routerLink",i.wc(4,p)),i.Db(3),i.sc("routerLink",i.wc(5,f)))},directives:[a.d,a.c,c.a,l.c,u.a,l.d,o.f,a.a,h.a,m.c,m.a,o.h,a.b,b.a],styles:["[nz-menu][_ngcontent-%COMP%]{line-height:64px}nz-breadcrumb[_ngcontent-%COMP%]{margin:16px 0}nz-content[_ngcontent-%COMP%]{padding:0 50px}nz-footer[_ngcontent-%COMP%]{text-align:center}.inner-content[_ngcontent-%COMP%]{background:#fff;padding:24px;min-height:600px}.auth-image[_ngcontent-%COMP%]{width:100%;height:550px}"]}),t})();var z=n("rIdH"),v=n("kScs"),w=n("ji8x"),x=n("3Pt+"),C=n("lGQG"),y=n("dEAy"),S=n("FwiY"),Y=n("ocnv"),Z=n("PTRe"),k=n("TaO5"),P=n("OzZK"),_=n("RwU8");const T=function(){return["/","auth","student","signup"]};let M=(()=>{class t{constructor(t,e,n,r){this.fb=t,this.authService=e,this.router=n,this.modal=r,this.isRemember=!1,this.checkCodeUrl="/getVerify",this.checkCodePass=!1,this.autoTips={"zh-cn":{required:"\u5fc5\u586b\u9879",checkCode:"\u9a8c\u8bc1\u7801\u9519\u8bef"},en:{required:"Input is required",checkCode:"checkCode error"}}}submitForm(){var t={};for(const e in this.validateForm.controls)this.validateForm.controls[e].markAsDirty(),this.validateForm.controls[e].updateValueAndValidity(),t[e]=this.validateForm.controls[e].value;this.validateForm.valid&&this.authService.checkCode(t.checkCode).subscribe(e=>{var n;200!=e.code?this.modal.error({nzTitle:"",nzContent:"\u9a8c\u8bc1\u7801\u9519\u8bef"}):(n=this.isRemember&&t.password==this.localPassword?this.localPassword:v.Md5.hashStr(t.password).toString(),this.authService.login(t.userID,n,2).subscribe(e=>{200==e.code?((new w.a).setToken(e.message),t.remember?this.authService.saveUserIdAndPassword("student",t.userID,n):this.authService.removeAllLocal("student"),this.authService.setUserId(e.data.userId),this.router.navigate(["/student"])):this.modal.error({nzTitle:"\u767b\u9646\u5931\u8d25",nzContent:e.message})},t=>{this.modal.success({nzTitle:"\u767b\u9646\u5931\u8d25",nzContent:"\u670d\u52a1\u5668\u51fa\u9519"})}))})}getVerify(){var t=(new Date).getTime();this.checkCodeUrl=this.checkCodeUrl.indexOf("?")>-1?this.checkCodeUrl+"&timestamp="+t:this.checkCodeUrl+"?timestamp="+t,this.imgSrc=this.checkCodeUrl}ngOnInit(){this.localUserID=this.authService.getLocalStorage("student","pbl_userId"),this.localPassword=this.authService.getLocalStorage("student","pbl_password"),this.authService.isLocalStorageSupported()&&null!=this.localUserID&&null!=this.localPassword&&(this.isRemember=!0);const{required:t}=z.a;this.validateForm=this.fb.group({userID:[null,[t]],password:[null,[t]],checkCode:[null,[t]],remember:[this.isRemember]}),this.validateForm.controls.userID.setValue(this.localUserID),this.validateForm.controls.password.setValue(this.localPassword),this.getVerify()}}return t.\u0275fac=function(e){return new(e||t)(i.Tb(x.d),i.Tb(C.a),i.Tb(o.d),i.Tb(y.b))},t.\u0275cmp=i.Nb({type:t,selectors:[["app-student-login"]],decls:32,vars:8,consts:[[1,"login-title"],["nz-icon","","nzType","user","nzTheme","outline"],["nz-form","",1,"login-form",3,"nzAutoTips","formGroup","ngSubmit"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","userID","placeholder","UserID"],["nzPrefixIcon","lock"],["type","password","nz-input","","formControlName","password","placeholder","Password"],["nzPrefixIcon","safety"],["type","text","nz-input","","formControlName","checkCode","placeholder","\u9a8c\u8bc1\u7801"],["id","check-code-img","width","95px","height","36px",3,"src","click"],["nz-row","",1,"login-form-margin"],["nz-col","",3,"nzSpan"],["nz-checkbox","","formControlName","remember"],[1,"login-form-forgot"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType"],[1,"sign-up"],[3,"routerLink"]],template:function(t,e){1&t&&(i.Zb(0,"div",0),i.Ub(1,"i",1),i.Mc(2,"\u5b66\u751f\u767b\u9646"),i.Yb(),i.Zb(3,"form",2),i.hc("ngSubmit",(function(){return e.submitForm()})),i.Zb(4,"nz-form-item"),i.Zb(5,"nz-form-control"),i.Zb(6,"nz-input-group",3),i.Ub(7,"input",4),i.Yb(),i.Yb(),i.Yb(),i.Zb(8,"nz-form-item"),i.Zb(9,"nz-form-control"),i.Zb(10,"nz-input-group",5),i.Ub(11,"input",6),i.Yb(),i.Yb(),i.Yb(),i.Zb(12,"nz-form-item"),i.Zb(13,"nz-form-control"),i.Zb(14,"nz-input-group",7),i.Ub(15,"input",8),i.Mc(16," \xa0\xa0"),i.Zb(17,"img",9),i.hc("click",(function(){return e.getVerify()})),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Zb(18,"div",10),i.Zb(19,"div",11),i.Zb(20,"label",12),i.Zb(21,"span"),i.Mc(22,"\u8bb0\u4f4f\u5bc6\u7801"),i.Yb(),i.Yb(),i.Yb(),i.Zb(23,"div",11),i.Zb(24,"a",13),i.Mc(25,"\u5fd8\u8bb0\u5bc6\u7801\uff1f"),i.Yb(),i.Yb(),i.Yb(),i.Zb(26,"button",14),i.Mc(27,"\u767b\u9646"),i.Yb(),i.Yb(),i.Zb(28,"div",15),i.Mc(29,"\u6ca1\u6709\u8d26\u6237\uff1f "),i.Zb(30,"a",16),i.Mc(31,"\u7acb\u5373\u6ce8\u518c"),i.Yb(),i.Yb()),2&t&&(i.Db(3),i.sc("nzAutoTips",e.autoTips)("formGroup",e.validateForm),i.Db(14),i.sc("src",e.imgSrc,i.Fc),i.Db(2),i.sc("nzSpan",12),i.Db(4),i.sc("nzSpan",12),i.Db(3),i.sc("nzType","primary"),i.Db(4),i.sc("routerLink",i.wc(7,T)))},directives:[u.a,S.a,x.p,x.l,Y.b,x.g,m.c,Y.c,m.a,Y.a,Z.c,Z.b,x.c,x.k,x.f,k.a,P.a,_.a,o.f],styles:[".login-form[_ngcontent-%COMP%]{max-width:300px;margin:auto}.login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-forgot[_ngcontent-%COMP%]{float:right}.login-form-button[_ngcontent-%COMP%]{width:100%}.login-title[_ngcontent-%COMP%]{font-weight:700;font-size:20px;margin-top:16px;margin-bottom:16px}.login-title[_ngcontent-%COMP%], .sign-up[_ngcontent-%COMP%]{text-align:center}#check-code-img[_ngcontent-%COMP%]{margin:-5px -12px}"]}),t})();var I=n("nJia"),U=n("zAKX");function D(t,e){1&t&&(i.Xb(0),i.Mc(1," \u8bf7\u786e\u8ba4\u60a8\u7684\u5bc6\u7801! "),i.Wb())}function L(t,e){1&t&&(i.Xb(0),i.Mc(1," \u4e24\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u4e00\u81f4! "),i.Wb())}function F(t,e){if(1&t&&(i.Kc(0,D,2,0,"ng-container",25),i.Kc(1,L,2,0,"ng-container",25)),2&t){const t=e.$implicit;i.sc("ngIf",t.hasError("required")),i.Db(1),i.sc("ngIf",t.hasError("confirm"))}}const O=[{path:"",component:g,children:[{path:"",redirectTo:"student/login"},{path:"example",component:s},{path:"student/login",component:M},{path:"student/signup",component:(()=>{class t{constructor(t,e,n,r){this.fb=t,this.authService=e,this.router=n,this.modal=r,this.submit=!1,this.autoTips={"zh-cn":{required:"\u5fc5\u586b\u9879",email:"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e",exists:"\u7528\u6237\u540d\u5df2\u5b58\u5728",agree:"\u8bf7\u540c\u610f\u534f\u8bae"},en:{required:"Input is required",email:"The input is not valid email",exists:"This username already exists",agree:"Please agree our requirement"}},this.confirmationValidator=t=>t.value?t.value!==this.validateForm.controls.password.value?{confirm:!0,error:!0}:{}:{required:!0},this.agreementValidator=t=>t.value?{}:{agree:!0}}submitForm(){this.submit=!0;var t={};for(const e in this.validateForm.controls)this.validateForm.controls[e].markAsDirty(),this.validateForm.controls[e].updateValueAndValidity(),t[e]=this.validateForm.controls[e].value;this.validateForm.valid&&this.authService.isUniqueUsername(t.username).subscribe(e=>{if(200!=e.code)this.modal.error({nzTitle:"",nzContent:e.message});else{let e=v.Md5.hashStr(t.password).toString();this.authService.signUp(t.username,e,t.gender,t.school,2).subscribe(t=>{200==t.code?(this.modal.success({nzTitle:"",nzContent:"\u6ce8\u518c\u6210\u529f,\u8bf7\u767b\u5f55"}),this.router.navigate(["/auth/student/login"])):this.modal.error({nzTitle:"",nzContent:"\u6ce8\u518c\u5931\u8d25"})},t=>{this.modal.error({nzTitle:"",nzContent:"\u6ce8\u518c\u5931\u8d25"})})}},t=>{console.log(t)})}updateConfirmValidator(){Promise.resolve().then(()=>this.validateForm.controls.checkPassword.updateValueAndValidity())}getCaptcha(t){t.preventDefault()}ngOnInit(){const t=z.a.required,e=z.a.minLengthPassword,n=z.a.maxLengthUsername,r=z.a.maxLengthPassword;this.validateForm=this.fb.group({username:[null,[t,(0,z.a.minLengthUsername)(4),n(20)]],school:[null,[t,n(40)]],gender:[null,[t]],password:[null,[t,e(6),r(16)]],checkPassword:[null,[t,this.confirmationValidator]],agree:[!1,[this.agreementValidator]]})}}return t.\u0275fac=function(e){return new(e||t)(i.Tb(x.d),i.Tb(C.a),i.Tb(o.d),i.Tb(y.b))},t.\u0275cmp=i.Nb({type:t,selectors:[["app-student-signup"]],decls:44,vars:25,consts:[[1,"sign-up-title"],["nz-form","",3,"nzAutoTips","formGroup","ngSubmit"],["nzFor","username","nzRequired","",3,"nzSm","nzXs"],["nz-icon","","nz-tooltip","","nzTitle","\u4f60\u60f3\u8981\u522b\u4eba\u600e\u4e48\u79f0\u547c\u4f60","nzType","question-circle","nzTheme","outline"],["nzErrorTip","\u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d",3,"nzSm","nzXs"],["nz-input","","id","username","formControlName","username"],["nzFor","school","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","\u8bf7\u8f93\u5165\u60a8\u7684\u5b66\u6821",3,"nzSm","nzXs"],["nz-input","","id","school","formControlName","school"],["nzFor","gender","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","\u8bf7\u8f93\u5165\u60a8\u7684\u6027\u522b",3,"nzSm","nzXs"],["id","gender","formControlName","gender"],["nzValue","\u7537","nzLabel","\u7537"],["nzValue","\u5973","nzLabel","\u5973"],["nzFor","password","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801!",3,"nzSm","nzXs"],["nz-input","","type","password","id","password","formControlName","password",3,"ngModelChange"],["nzFor","checkPassword","nzRequired","",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","type","password","formControlName","checkPassword","id","checkPassword"],["errorTpl",""],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-checkbox","","formControlName","agree"],["nz-button","","nzType","primary","id","sign-up-button"],[4,"ngIf"]],template:function(t,e){if(1&t&&(i.Zb(0,"div",0),i.Mc(1,"\u5b66\u751f\u7528\u6237\u6ce8\u518c"),i.Yb(),i.Zb(2,"form",1),i.hc("ngSubmit",(function(){return e.submitForm()})),i.Zb(3,"nz-form-item"),i.Zb(4,"nz-form-label",2),i.Zb(5,"span"),i.Mc(6," \u7528\u6237\u540d "),i.Ub(7,"i",3),i.Yb(),i.Yb(),i.Zb(8,"nz-form-control",4),i.Ub(9,"input",5),i.Yb(),i.Yb(),i.Zb(10,"nz-form-item"),i.Zb(11,"nz-form-label",6),i.Mc(12,"\u5b66\u6821"),i.Yb(),i.Zb(13,"nz-form-control",7),i.Ub(14,"input",8),i.Yb(),i.Yb(),i.Zb(15,"nz-form-item"),i.Zb(16,"nz-form-label",9),i.Mc(17,"\u6027\u522b"),i.Yb(),i.Zb(18,"nz-form-control",10),i.Zb(19,"nz-select",11),i.Ub(20,"nz-option",12),i.Ub(21,"nz-option",13),i.Yb(),i.Yb(),i.Yb(),i.Zb(22,"nz-form-item"),i.Zb(23,"nz-form-label",14),i.Mc(24,"\u5bc6\u7801"),i.Yb(),i.Zb(25,"nz-form-control",15),i.Zb(26,"input",16),i.hc("ngModelChange",(function(){return e.updateConfirmValidator()})),i.Yb(),i.Yb(),i.Yb(),i.Zb(27,"nz-form-item"),i.Zb(28,"nz-form-label",17),i.Mc(29,"\u786e\u8ba4\u5bc6\u7801"),i.Yb(),i.Zb(30,"nz-form-control",18),i.Ub(31,"input",19),i.Kc(32,F,2,2,"ng-template",null,20,i.Lc),i.Yb(),i.Yb(),i.Zb(34,"nz-form-item",21),i.Zb(35,"nz-form-control",22),i.Zb(36,"label",23),i.Zb(37,"span"),i.Mc(38,"\u6211\u5df2\u7ecf\u9605\u8bfb\u8fc7"),i.Zb(39,"a"),i.Mc(40,"\u76f8\u5173\u534f\u8bae"),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Zb(41,"nz-form-item",21),i.Zb(42,"button",24),i.Mc(43,"\u7acb\u5373\u6ce8\u518c"),i.Yb(),i.Yb(),i.Yb()),2&t){const t=i.Cc(33);i.Db(2),i.sc("nzAutoTips",e.autoTips)("formGroup",e.validateForm),i.Db(2),i.sc("nzSm",6)("nzXs",24),i.Db(4),i.sc("nzSm",14)("nzXs",24),i.Db(3),i.sc("nzSm",6)("nzXs",24),i.Db(2),i.sc("nzSm",14)("nzXs",24),i.Db(3),i.sc("nzSm",6)("nzXs",24),i.Db(2),i.sc("nzSm",14)("nzXs",24),i.Db(5),i.sc("nzSm",6)("nzXs",24),i.Db(2),i.sc("nzSm",14)("nzXs",24),i.Db(3),i.sc("nzSm",6)("nzXs",24),i.Db(2),i.sc("nzSm",14)("nzXs",24)("nzErrorTip",t),i.Db(5),i.sc("nzSpan",14)("nzOffset",6)}},directives:[x.p,x.l,Y.b,x.g,m.c,Y.c,m.a,Y.d,u.a,S.a,I.d,Y.a,Z.b,x.c,x.k,x.f,U.d,U.a,k.a,P.a,_.a,r.l],styles:[".sign-up-title[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:20px;margin-top:16px;margin-bottom:16px}#sign-up-button[_ngcontent-%COMP%]{text-align:center;margin:auto}"]}),t})()},{path:"teacher/login",component:(()=>{class t{constructor(t,e,n,r){this.fb=t,this.authService=e,this.router=n,this.modal=r,this.isRemember=!1,this.checkCodeUrl="/getVerify",this.checkCodePass=!1,this.autoTips={"zh-cn":{required:"\u5fc5\u586b\u9879",checkCode:"\u9a8c\u8bc1\u7801\u9519\u8bef"},en:{required:"Input is required",checkCode:"checkCode error"}}}submitForm(){var t={};for(const e in this.validateForm.controls)this.validateForm.controls[e].markAsDirty(),this.validateForm.controls[e].updateValueAndValidity(),t[e]=this.validateForm.controls[e].value;this.validateForm.valid&&this.authService.checkCode(t.checkCode).subscribe(e=>{var n;200!=e.code?this.modal.error({nzTitle:"",nzContent:"\u9a8c\u8bc1\u7801\u9519\u8bef"}):(n=this.isRemember&&t.password==this.localPassword?this.localPassword:v.Md5.hashStr(t.password).toString(),this.authService.login(t.userID,n,1).subscribe(e=>{200==e.code?((new w.a).setToken(e.message),t.remember?this.authService.saveUserIdAndPassword("teacher",t.userID,n):this.authService.removeAllLocal("teacher"),this.authService.setUserId(e.data.userId),this.router.navigate(["/teacher"])):this.modal.error({nzTitle:"\u767b\u9646\u5931\u8d25",nzContent:e.message})},t=>{this.modal.success({nzTitle:"\u767b\u9646\u5931\u8d25",nzContent:"\u670d\u52a1\u5668\u51fa\u9519"})}))})}getVerify(){var t=(new Date).getTime();this.checkCodeUrl=this.checkCodeUrl.indexOf("?")>-1?this.checkCodeUrl+"&timestamp="+t:this.checkCodeUrl+"?timestamp="+t,this.imgSrc=this.checkCodeUrl}ngOnInit(){this.localUserID=this.authService.getLocalStorage("teacher","pbl_userId"),this.localPassword=this.authService.getLocalStorage("teacher","pbl_password"),this.authService.isLocalStorageSupported()&&null!=this.localUserID&&null!=this.localPassword&&(this.isRemember=!0);const{required:t}=z.a;this.validateForm=this.fb.group({userID:[null,[t]],password:[null,[t]],checkCode:[null,[t]],remember:[this.isRemember]}),this.validateForm.controls.userID.setValue(this.localUserID),this.validateForm.controls.password.setValue(this.localPassword),this.getVerify()}}return t.\u0275fac=function(e){return new(e||t)(i.Tb(x.d),i.Tb(C.a),i.Tb(o.d),i.Tb(y.b))},t.\u0275cmp=i.Nb({type:t,selectors:[["app-teacher-login"]],decls:28,vars:6,consts:[[1,"login-title"],["nz-icon","","nzType","user","nzTheme","outline"],["nz-form","",1,"login-form",3,"nzAutoTips","formGroup","ngSubmit"],["nzErrorTip","Please input your username!"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","userID","placeholder","UserID"],["nzErrorTip","Please input your Password!"],["nzPrefixIcon","lock"],["type","password","nz-input","","formControlName","password","placeholder","Password"],["nzPrefixIcon","safety"],["type","text","nz-input","","formControlName","checkCode","placeholder","\u9a8c\u8bc1\u7801"],["id","check-code-img","width","95px","height","36px",3,"src","click"],["nz-row","",1,"login-form-margin"],["nz-col","",3,"nzSpan"],["nz-checkbox","","formControlName","remember"],[1,"login-form-forgot"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType"]],template:function(t,e){1&t&&(i.Zb(0,"div",0),i.Ub(1,"i",1),i.Mc(2,"\u8001\u5e08\u767b\u9646"),i.Yb(),i.Zb(3,"form",2),i.hc("ngSubmit",(function(){return e.submitForm()})),i.Zb(4,"nz-form-item"),i.Zb(5,"nz-form-control",3),i.Zb(6,"nz-input-group",4),i.Ub(7,"input",5),i.Yb(),i.Yb(),i.Yb(),i.Zb(8,"nz-form-item"),i.Zb(9,"nz-form-control",6),i.Zb(10,"nz-input-group",7),i.Ub(11,"input",8),i.Yb(),i.Yb(),i.Yb(),i.Zb(12,"nz-form-item"),i.Zb(13,"nz-form-control"),i.Zb(14,"nz-input-group",9),i.Ub(15,"input",10),i.Mc(16," \xa0\xa0\xa0"),i.Zb(17,"img",11),i.hc("click",(function(){return e.getVerify()})),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Zb(18,"div",12),i.Zb(19,"div",13),i.Zb(20,"label",14),i.Zb(21,"span"),i.Mc(22,"\u8bb0\u4f4f\u5bc6\u7801"),i.Yb(),i.Yb(),i.Yb(),i.Zb(23,"div",13),i.Zb(24,"a",15),i.Mc(25,"\u5fd8\u8bb0\u5bc6\u7801\uff1f"),i.Yb(),i.Yb(),i.Yb(),i.Zb(26,"button",16),i.Mc(27,"\u767b\u9646"),i.Yb(),i.Yb()),2&t&&(i.Db(3),i.sc("nzAutoTips",e.autoTips)("formGroup",e.validateForm),i.Db(14),i.sc("src",e.imgSrc,i.Fc),i.Db(2),i.sc("nzSpan",12),i.Db(4),i.sc("nzSpan",12),i.Db(3),i.sc("nzType","primary"))},directives:[u.a,S.a,x.p,x.l,Y.b,x.g,m.c,Y.c,m.a,Y.a,Z.c,Z.b,x.c,x.k,x.f,k.a,P.a,_.a],styles:[".login-form[_ngcontent-%COMP%]{max-width:300px;margin:auto}.login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-forgot[_ngcontent-%COMP%]{float:right}.login-form-button[_ngcontent-%COMP%]{width:100%}.login-title[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:20px;margin-top:16px;margin-bottom:16px}#check-code-img[_ngcontent-%COMP%]{margin:-5px -12px}"]}),t})()},{path:"manager/login",component:(()=>{class t{constructor(t,e,n,r){this.fb=t,this.authService=e,this.router=n,this.modal=r,this.isRemember=!1,this.checkCodeUrl="/getVerify",this.checkCodePass=!1,this.autoTips={"zh-cn":{required:"\u5fc5\u586b\u9879",checkCode:"\u9a8c\u8bc1\u7801\u9519\u8bef"},en:{required:"Input is required",checkCode:"checkCode error"}}}submitForm(){var t={};for(const e in this.validateForm.controls)this.validateForm.controls[e].markAsDirty(),this.validateForm.controls[e].updateValueAndValidity(),t[e]=this.validateForm.controls[e].value;this.validateForm.valid&&this.authService.checkCode(t.checkCode).subscribe(e=>{var n;200!=e.code?this.modal.error({nzTitle:"",nzContent:"\u9a8c\u8bc1\u7801\u9519\u8bef"}):(n=this.isRemember&&t.password==this.localPassword?this.localPassword:v.Md5.hashStr(t.password).toString(),this.authService.login(t.userID,n,0).subscribe(e=>{200==e.code?((new w.a).setToken(e.message),t.remember?this.authService.saveUserIdAndPassword("manager",t.userID,n):this.authService.removeAllLocal("manager"),this.authService.setUserId(e.data.userId),this.router.navigate(["/manager"])):this.modal.error({nzTitle:"\u767b\u9646\u5931\u8d25",nzContent:e.message})},t=>{this.modal.success({nzTitle:"\u767b\u9646\u5931\u8d25",nzContent:"\u670d\u52a1\u5668\u51fa\u9519"})}))})}getVerify(){var t=(new Date).getTime();this.checkCodeUrl=this.checkCodeUrl.indexOf("?")>-1?this.checkCodeUrl+"&timestamp="+t:this.checkCodeUrl+"?timestamp="+t,this.imgSrc=this.checkCodeUrl}ngOnInit(){this.localUserID=this.authService.getLocalStorage("manager","pbl_userId"),this.localPassword=this.authService.getLocalStorage("manager","pbl_password"),this.authService.isLocalStorageSupported()&&null!=this.localUserID&&null!=this.localPassword&&(this.isRemember=!0);const{required:t}=z.a;this.validateForm=this.fb.group({userID:[null,[t]],password:[null,[t]],checkCode:[null,[t]],remember:[this.isRemember]}),this.validateForm.controls.userID.setValue(this.localUserID),this.validateForm.controls.password.setValue(this.localPassword),this.getVerify()}}return t.\u0275fac=function(e){return new(e||t)(i.Tb(x.d),i.Tb(C.a),i.Tb(o.d),i.Tb(y.b))},t.\u0275cmp=i.Nb({type:t,selectors:[["app-manager-login"]],decls:28,vars:6,consts:[[1,"login-title"],["nz-icon","","nzType","user","nzTheme","outline"],["nz-form","",1,"login-form",3,"nzAutoTips","formGroup","ngSubmit"],["nzErrorTip","Please input your username!"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","userID","placeholder","UserID"],["nzErrorTip","Please input your Password!"],["nzPrefixIcon","lock"],["type","password","nz-input","","formControlName","password","placeholder","Password"],["nzPrefixIcon","safety"],["type","text","nz-input","","formControlName","checkCode","placeholder","\u9a8c\u8bc1\u7801"],["id","check-code-img","width","95px","height","36px",3,"src","click"],["nz-row","",1,"login-form-margin"],["nz-col","",3,"nzSpan"],["nz-checkbox","","formControlName","remember"],[1,"login-form-forgot"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType"]],template:function(t,e){1&t&&(i.Zb(0,"div",0),i.Ub(1,"i",1),i.Mc(2,"\u7ba1\u7406\u5458\u767b\u9646"),i.Yb(),i.Zb(3,"form",2),i.hc("ngSubmit",(function(){return e.submitForm()})),i.Zb(4,"nz-form-item"),i.Zb(5,"nz-form-control",3),i.Zb(6,"nz-input-group",4),i.Ub(7,"input",5),i.Yb(),i.Yb(),i.Yb(),i.Zb(8,"nz-form-item"),i.Zb(9,"nz-form-control",6),i.Zb(10,"nz-input-group",7),i.Ub(11,"input",8),i.Yb(),i.Yb(),i.Yb(),i.Zb(12,"nz-form-item"),i.Zb(13,"nz-form-control"),i.Zb(14,"nz-input-group",9),i.Ub(15,"input",10),i.Mc(16," \xa0\xa0\xa0"),i.Zb(17,"img",11),i.hc("click",(function(){return e.getVerify()})),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Zb(18,"div",12),i.Zb(19,"div",13),i.Zb(20,"label",14),i.Zb(21,"span"),i.Mc(22,"\u8bb0\u4f4f\u5bc6\u7801"),i.Yb(),i.Yb(),i.Yb(),i.Zb(23,"div",13),i.Zb(24,"a",15),i.Mc(25,"\u5fd8\u8bb0\u5bc6\u7801\uff1f"),i.Yb(),i.Yb(),i.Yb(),i.Zb(26,"button",16),i.Mc(27,"\u767b\u9646"),i.Yb(),i.Yb()),2&t&&(i.Db(3),i.sc("nzAutoTips",e.autoTips)("formGroup",e.validateForm),i.Db(14),i.sc("src",e.imgSrc,i.Fc),i.Db(2),i.sc("nzSpan",12),i.Db(4),i.sc("nzSpan",12),i.Db(3),i.sc("nzType","primary"))},directives:[u.a,S.a,x.p,x.l,Y.b,x.g,m.c,Y.c,m.a,Y.a,Z.c,Z.b,x.c,x.k,x.f,k.a,P.a,_.a],styles:[".login-form[_ngcontent-%COMP%]{max-width:300px;margin:auto}.login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-forgot[_ngcontent-%COMP%]{float:right}.login-form-button[_ngcontent-%COMP%]{width:100%}.login-title[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:20px;margin-top:16px;margin-bottom:16px}#check-code-img[_ngcontent-%COMP%]{margin:-5px -12px}"]}),t})()},{path:"**",redirectTo:"404"}]}];let A=(()=>{class t{}return t.\u0275mod=i.Rb({type:t}),t.\u0275inj=i.Qb({factory:function(e){return new(e||t)},imports:[[o.g.forChild(O)],o.g]}),t})();var V=n("PMIT"),N=n("oz47");let X=(()=>{class t{}return t.\u0275mod=i.Rb({type:t}),t.\u0275inj=i.Qb({factory:function(e){return new(e||t)},imports:[[A,r.c,V.a,N.a,x.h,x.n]]}),t})()},rIdH:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("3Pt+");class o extends r.o{static minLengthUsername(t){return e=>null===r.o.minLength(t)(e)?null:e.value.replace(/[^\x00-\xff]/g,"xx").length<t?{minlength:{"zh-cn":`\u4e2d\u6587\u6700\u5c0f\u957f\u5ea6\u4e3a${t/2}, \u82f1\u6587\u6216\u5b57\u7b26\u6700\u5c0f\u957f\u5ea6\u4e3a${t}`,en:`Chinese minLength is ${t/2}, English or character minLength is${t}`}}:void 0}static maxLengthUsername(t){return e=>null===r.o.maxLength(t)(e)?null:e.value.replace(/[^\x00-\xff]/g,"xx").length>t?{maxlength:{"zh-cn":`\u4e2d\u6587\u6700\u5927\u957f\u5ea6\u4e3a${t/2}, \u82f1\u6587\u6216\u5b57\u7b26\u6700\u5927\u957f\u5ea6\u4e3a${t}`,en:`Chinese maxLength is ${t/2}, English or character maxLength is${t}`}}:void 0}static minLengthPassword(t){return e=>null===r.o.minLength(t)(e)?null:e.value.replace(/[^\x00-\xff]/g,"xx").length<t?{minlength:{"zh-cn":`\u5bc6\u7801\u6700\u5c0f\u957f\u5ea6\u4e3a${t}`,en:`Password minLength is${t}`}}:void 0}static maxLengthPassword(t){return e=>null===r.o.maxLength(t)(e)?null:e.value.replace(/[^\x00-\xff]/g,"xx").length>t?{maxlength:{"zh-cn":`\u5bc6\u7801\u6700\u5927\u957f\u5ea6\u4e3a${t}`,en:`Password maxLength is${t}`}}:void 0}static mobile(t){const e=t.value;return function(t){return null==t||0===t.length}(e)||function(t){return"string"==typeof t&&/(^1\d{10}$)/.test(t)}(e)?null:{mobile:{"zh-cn":"\u624b\u673a\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e",en:"Mobile phone number is not valid"}}}static max(t){return e=>null===r.o.max(t)(e)?null:{maxlength:{"zh-cn":`\u6700\u5927\u503c\u4e3a ${t}`,en:`MaxLength is ${t}`}}}static min(t){return e=>null===r.o.min(t)(e)?null:{maxlength:{"zh-cn":`\u6700\u5c0f\u503c\u4e3a ${t}`,en:`MinLength is ${t}`}}}}}}]);