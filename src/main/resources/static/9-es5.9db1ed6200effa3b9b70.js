function _inherits(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&_setPrototypeOf(e,n)}function _setPrototypeOf(e,n){return(_setPrototypeOf=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function _createSuper(e){var n=_isNativeReflectConstruct();return function(){var t,o=_getPrototypeOf(e);if(n){var r=_getPrototypeOf(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(e,n){return!n||"object"!=typeof n&&"function"!=typeof n?_assertThisInitialized(e):n}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"MV+G":function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var o=t("fXoL"),r=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=o.Nb({type:e,selectors:[["app-header-logo"]],decls:2,vars:0,consts:[[1,"logo"]],template:function(e,n){1&e&&(o.Zb(0,"span",0),o.Mc(1,"PBL\u9879\u76ee\u5f0f\u5b66\u4e60\u5e73\u53f0"),o.Yb())},styles:[".logo[_ngcontent-%COMP%]{width:240px;height:31px;margin:16px 28px 16px 0;padding:3px;float:left;color:#fff;text-align:center;font-size:1.875em;line-height:100%}"]}),e}()},cDKA:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var o=t("fXoL"),r=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=o.Nb({type:e,selectors:[["app-footer-content"]],decls:2,vars:0,template:function(e,n){1&e&&(o.Zb(0,"div"),o.Mc(1,"PBL platform \xa92020"),o.Yb())},styles:[""]}),e}()},lBUW:function(e,n,t){"use strict";t.r(n),t.d(n,"AuthModule",(function(){return Q}));var o,r,i,a=t("ofXK"),s=t("tyNb"),c=t("fXoL"),l=((o=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=c.Nb({type:o,selectors:[["app-example"]],decls:2,vars:0,template:function(e,n){1&e&&(c.Zb(0,"p"),c.Mc(1,"example works!"),c.Yb())},styles:[""]}),o),u=t("yW9e"),m=t("MV+G"),b=t("Q8cG"),h=t("C2AL"),p=t("yNE/"),d=t("B+r4"),f=t("cDKA"),g=function(){return["/","auth","student","login"]},z=function(){return["/","auth","teacher","login"]},v=function(){return["/","auth","manager","login"]},C=((r=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||r)},r.\u0275cmp=c.Nb({type:r,selectors:[["app-auth-main"]],decls:23,vars:6,consts:[["nz-menu","","nzTheme","dark","nzMode","horizontal"],["nzMatchRouter","","nz-menu-item",""],[3,"routerLink"],[1,"inner-content"],["nz-row","","nzGutter","16"],["nz-col","","nzSpan","16"],["src","/assets/image/pbl.jpg",1,"auth-image"],["nz-col","","nzSpan","8"]],template:function(e,n){1&e&&(c.Zb(0,"nz-layout"),c.Zb(1,"nz-header"),c.Ub(2,"app-header-logo"),c.Zb(3,"ul",0),c.Zb(4,"li",1),c.Zb(5,"a",2),c.Mc(6,"\u6211\u662f\u5b66\u751f"),c.Yb(),c.Yb(),c.Zb(7,"li",1),c.Zb(8,"a",2),c.Mc(9,"\u6211\u662f\u8001\u5e08"),c.Yb(),c.Yb(),c.Zb(10,"li",1),c.Zb(11,"a",2),c.Mc(12,"\u6211\u662f\u7ba1\u7406\u5458"),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Zb(13,"nz-content"),c.Ub(14,"nz-breadcrumb"),c.Zb(15,"div",3),c.Zb(16,"div",4),c.Zb(17,"div",5),c.Ub(18,"img",6),c.Yb(),c.Zb(19,"div",7),c.Ub(20,"router-outlet"),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Zb(21,"nz-footer"),c.Ub(22,"app-footer-content"),c.Yb(),c.Yb()),2&e&&(c.Db(5),c.sc("routerLink",c.wc(3,g)),c.Db(3),c.sc("routerLink",c.wc(4,z)),c.Db(3),c.sc("routerLink",c.wc(5,v)))},directives:[u.d,u.c,m.a,b.c,h.a,b.d,s.f,u.a,p.a,d.c,d.a,s.h,u.b,f.a],styles:["[nz-menu][_ngcontent-%COMP%]{line-height:64px}nz-breadcrumb[_ngcontent-%COMP%]{margin:16px 0}nz-content[_ngcontent-%COMP%]{padding:0 50px}nz-footer[_ngcontent-%COMP%]{text-align:center}.inner-content[_ngcontent-%COMP%]{background:#fff;padding:24px;min-height:600px}.auth-image[_ngcontent-%COMP%]{width:100%;height:550px}"]}),r),y=t("rIdH"),k=t("tk/3"),w=t("kScs"),x=t("3Pt+"),P=t("lGQG"),Y=t("dEAy"),Z=t("FwiY"),S=t("ocnv"),_=t("PTRe"),T=t("TaO5"),M=t("OzZK"),U=t("RwU8"),D=function(){return["/","auth","student","signup"]},I=((i=function(){function e(n,t,o,r){_classCallCheck(this,e),this.fb=n,this.authService=t,this.router=o,this.modal=r,this.isRemember=!1,this.checkCodeUrl="http://localhost:8080/getVerify",this.checkCodePass=!1,this.autoTips={"zh-cn":{required:"\u5fc5\u586b\u9879",checkCode:"\u9a8c\u8bc1\u7801\u9519\u8bef"},en:{required:"Input is required",checkCode:"checkCode error"}}}return _createClass(e,[{key:"submitForm",value:function(){var e=this,n={};for(var t in this.validateForm.controls)this.validateForm.controls[t].markAsDirty(),this.validateForm.controls[t].updateValueAndValidity(),n[t]=this.validateForm.controls[t].value;if(this.validateForm.valid){var o=(new k.f).set("checkCode",n.checkCode);console.log(o),this.authService.checkCode(o).subscribe((function(t){if("success"!=t.state||"1234"==n.checkCode)e.modal.error({nzTitle:"",nzContent:"\u9a8c\u8bc1\u7801\u9519\u8bef"});else{var o;o=e.isRemember&&n.password==e.localPassword?e.localPassword:w.Md5.hashStr(n.password).toString();var r=(new k.f).set("userID",n.userID).set("password",o);console.log(r),e.authService.login(r).subscribe((function(t){"success"==t.state?(n.remember?e.authService.saveUserIdAndPassword("student",n.userID,o):e.authService.removeAllLocal("student"),e.router.navigate(["/student"])):e.modal.error({nzTitle:"\u767b\u9646\u5931\u8d25",nzContent:"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef"})}),(function(n){e.modal.success({nzTitle:"\u767b\u9646\u5931\u8d25",nzContent:"\u670d\u52a1\u5668\u51fa\u9519"})}))}}))}}},{key:"getVerify",value:function(){var e=(new Date).getTime();this.checkCodeUrl=this.checkCodeUrl.indexOf("?")>-1?this.checkCodeUrl+"&timestamp="+e:this.checkCodeUrl+"?timestamp="+e,document.querySelector("#check-code-img").src=this.checkCodeUrl}},{key:"ngOnInit",value:function(){this.localUserID=this.authService.getLocalStorage("student","pbl_userId"),this.localPassword=this.authService.getLocalStorage("student","pbl_password"),this.authService.isLocalStorageSupported()&&null!=this.localUserID&&null!=this.localPassword&&(this.isRemember=!0);var e=y.a.required;this.validateForm=this.fb.group({userID:[null,[e]],password:[null,[e]],checkCode:[null,[e]],remember:[this.isRemember]}),this.validateForm.controls.userID.setValue(this.localUserID),this.validateForm.controls.password.setValue(this.localPassword)}}]),e}()).\u0275fac=function(e){return new(e||i)(c.Tb(x.d),c.Tb(P.a),c.Tb(s.d),c.Tb(Y.b))},i.\u0275cmp=c.Nb({type:i,selectors:[["app-student-login"]],decls:32,vars:7,consts:[[1,"login-title"],["nz-icon","","nzType","user","nzTheme","outline"],["nz-form","",1,"login-form",3,"nzAutoTips","formGroup","ngSubmit"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","userID","placeholder","UserID"],["nzPrefixIcon","lock"],["type","password","nz-input","","formControlName","password","placeholder","Password"],["nzPrefixIcon","safety"],["type","text","nz-input","","formControlName","checkCode","placeholder","\u9a8c\u8bc1\u7801"],["id","check-code-img","src","","width","95px","height","36px"],["nz-row","",1,"login-form-margin"],["nz-col","",3,"nzSpan"],["nz-checkbox","","formControlName","remember"],[1,"login-form-forgot"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType"],[1,"sign-up"],[3,"routerLink"]],template:function(e,n){1&e&&(c.Zb(0,"div",0),c.Ub(1,"i",1),c.Mc(2,"\u5b66\u751f\u767b\u9646"),c.Yb(),c.Zb(3,"form",2),c.hc("ngSubmit",(function(){return n.submitForm()})),c.Zb(4,"nz-form-item"),c.Zb(5,"nz-form-control"),c.Zb(6,"nz-input-group",3),c.Ub(7,"input",4),c.Yb(),c.Yb(),c.Yb(),c.Zb(8,"nz-form-item"),c.Zb(9,"nz-form-control"),c.Zb(10,"nz-input-group",5),c.Ub(11,"input",6),c.Yb(),c.Yb(),c.Yb(),c.Zb(12,"nz-form-item"),c.Zb(13,"nz-form-control"),c.Zb(14,"nz-input-group",7),c.Ub(15,"input",8),c.Mc(16," \xa0"),c.Ub(17,"img",9),c.Yb(),c.Yb(),c.Yb(),c.Zb(18,"div",10),c.Zb(19,"div",11),c.Zb(20,"label",12),c.Zb(21,"span"),c.Mc(22,"\u8bb0\u4f4f\u5bc6\u7801"),c.Yb(),c.Yb(),c.Yb(),c.Zb(23,"div",11),c.Zb(24,"a",13),c.Mc(25,"\u5fd8\u8bb0\u5bc6\u7801\uff1f"),c.Yb(),c.Yb(),c.Yb(),c.Zb(26,"button",14),c.Mc(27,"\u767b\u9646"),c.Yb(),c.Yb(),c.Zb(28,"div",15),c.Mc(29,"\u6ca1\u6709\u8d26\u6237\uff1f "),c.Zb(30,"a",16),c.Mc(31,"\u7acb\u5373\u6ce8\u518c"),c.Yb(),c.Yb()),2&e&&(c.Db(3),c.sc("nzAutoTips",n.autoTips)("formGroup",n.validateForm),c.Db(16),c.sc("nzSpan",12),c.Db(4),c.sc("nzSpan",12),c.Db(3),c.sc("nzType","primary"),c.Db(4),c.sc("routerLink",c.wc(6,D)))},directives:[h.a,Z.a,x.p,x.l,S.b,x.g,d.c,S.c,d.a,S.a,_.c,_.b,x.c,x.k,x.f,T.a,M.a,U.a,s.f],styles:[".login-form[_ngcontent-%COMP%]{max-width:300px;margin:auto}.login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-forgot[_ngcontent-%COMP%]{float:right}.login-form-button[_ngcontent-%COMP%]{width:100%}.login-title[_ngcontent-%COMP%]{font-weight:700;font-size:20px;margin-top:16px;margin-bottom:16px}.login-title[_ngcontent-%COMP%], .sign-up[_ngcontent-%COMP%]{text-align:center}#check-code-img[_ngcontent-%COMP%]{margin:-5px -12px}"]}),i),O=t("nJia"),F=t("zAKX");function L(e,n){1&e&&(c.Xb(0),c.Mc(1," \u8bf7\u786e\u8ba4\u60a8\u7684\u5bc6\u7801! "),c.Wb())}function q(e,n){1&e&&(c.Xb(0),c.Mc(1," \u4e24\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u4e00\u81f4! "),c.Wb())}function V(e,n){if(1&e&&(c.Kc(0,L,2,0,"ng-container",25),c.Kc(1,q,2,0,"ng-container",25)),2&e){var t=n.$implicit;c.sc("ngIf",t.hasError("required")),c.Db(1),c.sc("ngIf",t.hasError("confirm"))}}var R,N,A,X,E,G=[{path:"",component:C,children:[{path:"",redirectTo:"student/login"},{path:"example",component:l},{path:"student/login",component:I},{path:"student/signup",component:(A=function(){function e(n,t,o,r){var i=this;_classCallCheck(this,e),this.fb=n,this.authService=t,this.router=o,this.modal=r,this.autoTips={"zh-cn":{required:"\u5fc5\u586b\u9879",email:"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e",exists:"\u7528\u6237\u540d\u5df2\u5b58\u5728",agree:"\u8bf7\u540c\u610f\u534f\u8bae"},en:{required:"Input is required",email:"The input is not valid email",exists:"This username already exists",agree:"Please agree our requirement"}},this.confirmationValidator=function(e){return e.value?e.value!==i.validateForm.controls.password.value?{confirm:!0,error:!0}:{}:{required:!0}},this.agreementValidator=function(e){return e.value?{}:{agree:!0}},this.uniqueUsernameValidator=function(e){return e.value?(i.authService.isUniqueUsername(e.value).subscribe((function(e){i.isUnique=e.result}),(function(e){console.log(e)})),1==i.isUnique&&"111222"===e.value?{exists:!0,error:!0}:{}):{required:!0}}}return _createClass(e,[{key:"submitForm",value:function(){var e=this,n={};for(var t in this.validateForm.controls)this.validateForm.controls[t].markAsDirty(),this.validateForm.controls[t].updateValueAndValidity(),n[t]=this.validateForm.controls[t].value;if(this.validateForm.valid){var o=w.Md5.hashStr(n.password).toString(),r=(new k.f).set("username",n.username).set("school",n.school).set("gender",n.gender).set("password",o);this.authService.signUp(r).subscribe((function(n){"success"==n.state?(e.modal.success({nzTitle:"",nzContent:"\u6ce8\u518c\u6210\u529f,\u8bf7\u767b\u5f55"}),e.router.navigate(["/auth/student/login"])):e.modal.error({nzTitle:"",nzContent:"\u6ce8\u518c\u5931\u8d25"})}),(function(n){e.modal.error({nzTitle:"",nzContent:"\u6ce8\u518c\u5931\u8d25"})}))}}},{key:"updateConfirmValidator",value:function(){var e=this;Promise.resolve().then((function(){return e.validateForm.controls.checkPassword.updateValueAndValidity()}))}},{key:"getCaptcha",value:function(e){e.preventDefault()}},{key:"ngOnInit",value:function(){var e=y.a.required,n=y.a.minLengthPassword,t=y.a.maxLengthUsername,o=y.a.maxLengthPassword;this.validateForm=this.fb.group({username:[null,[e,(0,y.a.minLengthUsername)(4),t(20),this.uniqueUsernameValidator]],school:[null,[e,t(40)]],gender:[null,[e]],password:[null,[e,n(6),o(16)]],checkPassword:[null,[e,this.confirmationValidator]],agree:[!1,[this.agreementValidator]]})}}]),e}(),A.\u0275fac=function(e){return new(e||A)(c.Tb(x.d),c.Tb(P.a),c.Tb(s.d),c.Tb(Y.b))},A.\u0275cmp=c.Nb({type:A,selectors:[["app-student-signup"]],decls:44,vars:25,consts:[[1,"sign-up-title"],["nz-form","",3,"nzAutoTips","formGroup","ngSubmit"],["nzFor","username","nzRequired","",3,"nzSm","nzXs"],["nz-icon","","nz-tooltip","","nzTitle","\u4f60\u60f3\u8981\u522b\u4eba\u600e\u4e48\u79f0\u547c\u4f60","nzType","question-circle","nzTheme","outline"],["nzErrorTip","\u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d",3,"nzSm","nzXs"],["nz-input","","id","username","formControlName","username"],["nzFor","school","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","\u8bf7\u8f93\u5165\u60a8\u7684\u5b66\u6821",3,"nzSm","nzXs"],["nz-input","","id","school","formControlName","school"],["nzFor","gender","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","\u8bf7\u8f93\u5165\u60a8\u7684\u6027\u522b",3,"nzSm","nzXs"],["id","gender","formControlName","gender"],["nzValue","\u7537","nzLabel","\u7537"],["nzValue","\u5973","nzLabel","\u5973"],["nzFor","password","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801!",3,"nzSm","nzXs"],["nz-input","","type","password","id","password","formControlName","password",3,"ngModelChange"],["nzFor","checkPassword","nzRequired","",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","type","password","formControlName","checkPassword","id","checkPassword"],["errorTpl",""],["nz-row","",1,"register-area"],[3,"nzSpan","nzOffset"],["nz-checkbox","","formControlName","agree"],["nz-button","","nzType","primary","id","sign-up-button"],[4,"ngIf"]],template:function(e,n){if(1&e&&(c.Zb(0,"div",0),c.Mc(1,"\u5b66\u751f\u7528\u6237\u6ce8\u518c"),c.Yb(),c.Zb(2,"form",1),c.hc("ngSubmit",(function(){return n.submitForm()})),c.Zb(3,"nz-form-item"),c.Zb(4,"nz-form-label",2),c.Zb(5,"span"),c.Mc(6," \u7528\u6237\u540d "),c.Ub(7,"i",3),c.Yb(),c.Yb(),c.Zb(8,"nz-form-control",4),c.Ub(9,"input",5),c.Yb(),c.Yb(),c.Zb(10,"nz-form-item"),c.Zb(11,"nz-form-label",6),c.Mc(12,"\u5b66\u6821"),c.Yb(),c.Zb(13,"nz-form-control",7),c.Ub(14,"input",8),c.Yb(),c.Yb(),c.Zb(15,"nz-form-item"),c.Zb(16,"nz-form-label",9),c.Mc(17,"\u6027\u522b"),c.Yb(),c.Zb(18,"nz-form-control",10),c.Zb(19,"nz-select",11),c.Ub(20,"nz-option",12),c.Ub(21,"nz-option",13),c.Yb(),c.Yb(),c.Yb(),c.Zb(22,"nz-form-item"),c.Zb(23,"nz-form-label",14),c.Mc(24,"\u5bc6\u7801"),c.Yb(),c.Zb(25,"nz-form-control",15),c.Zb(26,"input",16),c.hc("ngModelChange",(function(){return n.updateConfirmValidator()})),c.Yb(),c.Yb(),c.Yb(),c.Zb(27,"nz-form-item"),c.Zb(28,"nz-form-label",17),c.Mc(29,"\u786e\u8ba4\u5bc6\u7801"),c.Yb(),c.Zb(30,"nz-form-control",18),c.Ub(31,"input",19),c.Kc(32,V,2,2,"ng-template",null,20,c.Lc),c.Yb(),c.Yb(),c.Zb(34,"nz-form-item",21),c.Zb(35,"nz-form-control",22),c.Zb(36,"label",23),c.Zb(37,"span"),c.Mc(38,"\u6211\u5df2\u7ecf\u9605\u8bfb\u8fc7"),c.Zb(39,"a"),c.Mc(40,"\u76f8\u5173\u534f\u8bae"),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Zb(41,"nz-form-item",21),c.Zb(42,"button",24),c.Mc(43,"\u7acb\u5373\u6ce8\u518c"),c.Yb(),c.Yb(),c.Yb()),2&e){var t=c.Cc(33);c.Db(2),c.sc("nzAutoTips",n.autoTips)("formGroup",n.validateForm),c.Db(2),c.sc("nzSm",6)("nzXs",24),c.Db(4),c.sc("nzSm",14)("nzXs",24),c.Db(3),c.sc("nzSm",6)("nzXs",24),c.Db(2),c.sc("nzSm",14)("nzXs",24),c.Db(3),c.sc("nzSm",6)("nzXs",24),c.Db(2),c.sc("nzSm",14)("nzXs",24),c.Db(5),c.sc("nzSm",6)("nzXs",24),c.Db(2),c.sc("nzSm",14)("nzXs",24),c.Db(3),c.sc("nzSm",6)("nzXs",24),c.Db(2),c.sc("nzSm",14)("nzXs",24)("nzErrorTip",t),c.Db(5),c.sc("nzSpan",14)("nzOffset",6)}},directives:[x.p,x.l,S.b,x.g,d.c,S.c,d.a,S.d,h.a,Z.a,O.d,S.a,_.b,x.c,x.k,x.f,F.d,F.a,T.a,M.a,U.a,a.l],styles:[".sign-up-title[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:20px;margin-top:16px;margin-bottom:16px}#sign-up-button[_ngcontent-%COMP%]{text-align:center;margin:auto}"]}),A)},{path:"teacher/login",component:(N=function(){function e(n,t,o,r){_classCallCheck(this,e),this.fb=n,this.authService=t,this.router=o,this.modal=r,this.isRemember=!1,this.checkCodeUrl="http://localhost:8080/getVerify",this.checkCodePass=!1,this.autoTips={"zh-cn":{required:"\u5fc5\u586b\u9879",checkCode:"\u9a8c\u8bc1\u7801\u9519\u8bef"},en:{required:"Input is required",checkCode:"checkCode error"}}}return _createClass(e,[{key:"submitForm",value:function(){var e=this,n={};for(var t in this.validateForm.controls)this.validateForm.controls[t].markAsDirty(),this.validateForm.controls[t].updateValueAndValidity(),n[t]=this.validateForm.controls[t].value;if(this.validateForm.valid){var o=(new k.f).set("checkCode",n.checkCode);console.log(o),this.authService.checkCode(o).subscribe((function(t){if("success"!=t.state||"1234"==n.checkCode)e.modal.error({nzTitle:"",nzContent:"\u9a8c\u8bc1\u7801\u9519\u8bef"});else{var o;o=e.isRemember&&n.password==e.localPassword?e.localPassword:w.Md5.hashStr(n.password).toString();var r=(new k.f).set("userID",n.userID).set("password",o);console.log(r),e.authService.login(r).subscribe((function(t){"success"==t.state?(n.remember?e.authService.saveUserIdAndPassword("teacher",n.userID,o):e.authService.removeAllLocal("teacher"),e.router.navigate(["/teacher"])):e.modal.error({nzTitle:"\u767b\u9646\u5931\u8d25",nzContent:"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef"})}),(function(n){e.modal.success({nzTitle:"\u767b\u9646\u5931\u8d25",nzContent:"\u670d\u52a1\u5668\u51fa\u9519"})}))}}))}}},{key:"getVerify",value:function(){var e=(new Date).getTime();this.checkCodeUrl=this.checkCodeUrl.indexOf("?")>-1?this.checkCodeUrl+"&timestamp="+e:this.checkCodeUrl+"?timestamp="+e,document.querySelector("#check-code-img").src=this.checkCodeUrl}},{key:"ngOnInit",value:function(){this.localUserID=this.authService.getLocalStorage("teacher","pbl_userId"),this.localPassword=this.authService.getLocalStorage("teacher","pbl_password"),this.authService.isLocalStorageSupported()&&null!=this.localUserID&&null!=this.localPassword&&(this.isRemember=!0);var e=y.a.required;this.validateForm=this.fb.group({userID:[null,[e]],password:[null,[e]],checkCode:[null,[e]],remember:[this.isRemember]}),this.validateForm.controls.userID.setValue(this.localUserID),this.validateForm.controls.password.setValue(this.localPassword)}}]),e}(),N.\u0275fac=function(e){return new(e||N)(c.Tb(x.d),c.Tb(P.a),c.Tb(s.d),c.Tb(Y.b))},N.\u0275cmp=c.Nb({type:N,selectors:[["app-teacher-login"]],decls:28,vars:5,consts:[[1,"login-title"],["nz-icon","","nzType","user","nzTheme","outline"],["nz-form","",1,"login-form",3,"nzAutoTips","formGroup","ngSubmit"],["nzErrorTip","Please input your username!"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","userID","placeholder","UserID"],["nzErrorTip","Please input your Password!"],["nzPrefixIcon","lock"],["type","password","nz-input","","formControlName","password","placeholder","Password"],["nzPrefixIcon","safety"],["type","text","nz-input","","formControlName","checkCode","placeholder","\u9a8c\u8bc1\u7801"],["id","check-code-img","src","","width","95px","height","36px"],["nz-row","",1,"login-form-margin"],["nz-col","",3,"nzSpan"],["nz-checkbox","","formControlName","remember"],[1,"login-form-forgot"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType"]],template:function(e,n){1&e&&(c.Zb(0,"div",0),c.Ub(1,"i",1),c.Mc(2,"\u8001\u5e08\u767b\u9646"),c.Yb(),c.Zb(3,"form",2),c.hc("ngSubmit",(function(){return n.submitForm()})),c.Zb(4,"nz-form-item"),c.Zb(5,"nz-form-control",3),c.Zb(6,"nz-input-group",4),c.Ub(7,"input",5),c.Yb(),c.Yb(),c.Yb(),c.Zb(8,"nz-form-item"),c.Zb(9,"nz-form-control",6),c.Zb(10,"nz-input-group",7),c.Ub(11,"input",8),c.Yb(),c.Yb(),c.Yb(),c.Zb(12,"nz-form-item"),c.Zb(13,"nz-form-control"),c.Zb(14,"nz-input-group",9),c.Ub(15,"input",10),c.Mc(16," \xa0"),c.Ub(17,"img",11),c.Yb(),c.Yb(),c.Yb(),c.Zb(18,"div",12),c.Zb(19,"div",13),c.Zb(20,"label",14),c.Zb(21,"span"),c.Mc(22,"\u8bb0\u4f4f\u5bc6\u7801"),c.Yb(),c.Yb(),c.Yb(),c.Zb(23,"div",13),c.Zb(24,"a",15),c.Mc(25,"\u5fd8\u8bb0\u5bc6\u7801\uff1f"),c.Yb(),c.Yb(),c.Yb(),c.Zb(26,"button",16),c.Mc(27,"\u767b\u9646"),c.Yb(),c.Yb()),2&e&&(c.Db(3),c.sc("nzAutoTips",n.autoTips)("formGroup",n.validateForm),c.Db(16),c.sc("nzSpan",12),c.Db(4),c.sc("nzSpan",12),c.Db(3),c.sc("nzType","primary"))},directives:[h.a,Z.a,x.p,x.l,S.b,x.g,d.c,S.c,d.a,S.a,_.c,_.b,x.c,x.k,x.f,T.a,M.a,U.a],styles:[".login-form[_ngcontent-%COMP%]{max-width:300px;margin:auto}.login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-forgot[_ngcontent-%COMP%]{float:right}.login-form-button[_ngcontent-%COMP%]{width:100%}.login-title[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:20px;margin-top:16px;margin-bottom:16px}button[_ngcontent-%COMP%]{background-color:red}#check-code-img[_ngcontent-%COMP%]{margin:-5px -12px}"]}),N)},{path:"manager/login",component:(R=function(){function e(n,t,o,r){_classCallCheck(this,e),this.fb=n,this.authService=t,this.router=o,this.modal=r,this.isRemember=!1,this.checkCodeUrl="http://localhost:8080/getVerify",this.checkCodePass=!1,this.autoTips={"zh-cn":{required:"\u5fc5\u586b\u9879",checkCode:"\u9a8c\u8bc1\u7801\u9519\u8bef"},en:{required:"Input is required",checkCode:"checkCode error"}}}return _createClass(e,[{key:"submitForm",value:function(){var e=this,n={};for(var t in this.validateForm.controls)this.validateForm.controls[t].markAsDirty(),this.validateForm.controls[t].updateValueAndValidity(),n[t]=this.validateForm.controls[t].value;if(this.validateForm.valid){var o=(new k.f).set("checkCode",n.checkCode);console.log(o),this.authService.checkCode(o).subscribe((function(t){if("success"!=t.state||"1234"==n.checkCode)e.modal.error({nzTitle:"",nzContent:"\u9a8c\u8bc1\u7801\u9519\u8bef"});else{var o;o=e.isRemember&&n.password==e.localPassword?e.localPassword:w.Md5.hashStr(n.password).toString();var r=(new k.f).set("userID",n.userID).set("password",o);console.log(r),e.authService.login(r).subscribe((function(t){"success"==t.state?(n.remember?e.authService.saveUserIdAndPassword("manager",n.userID,o):e.authService.removeAllLocal("manager"),e.router.navigate(["/manager"])):e.modal.error({nzTitle:"\u767b\u9646\u5931\u8d25",nzContent:"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef"})}),(function(n){e.modal.success({nzTitle:"\u767b\u9646\u5931\u8d25",nzContent:"\u670d\u52a1\u5668\u51fa\u9519"})}))}}))}}},{key:"getVerify",value:function(){var e=(new Date).getTime();this.checkCodeUrl=this.checkCodeUrl.indexOf("?")>-1?this.checkCodeUrl+"&timestamp="+e:this.checkCodeUrl+"?timestamp="+e,document.querySelector("#check-code-img").src=this.checkCodeUrl}},{key:"ngOnInit",value:function(){this.localUserID=this.authService.getLocalStorage("manager","pbl_userId"),this.localPassword=this.authService.getLocalStorage("manager","pbl_password"),this.authService.isLocalStorageSupported()&&null!=this.localUserID&&null!=this.localPassword&&(this.isRemember=!0);var e=y.a.required;this.validateForm=this.fb.group({userID:[null,[e]],password:[null,[e]],checkCode:[null,[e]],remember:[this.isRemember]}),this.validateForm.controls.userID.setValue(this.localUserID),this.validateForm.controls.password.setValue(this.localPassword)}}]),e}(),R.\u0275fac=function(e){return new(e||R)(c.Tb(x.d),c.Tb(P.a),c.Tb(s.d),c.Tb(Y.b))},R.\u0275cmp=c.Nb({type:R,selectors:[["app-manager-login"]],decls:28,vars:5,consts:[[1,"login-title"],["nz-icon","","nzType","user","nzTheme","outline"],["nz-form","",1,"login-form",3,"nzAutoTips","formGroup","ngSubmit"],["nzErrorTip","Please input your username!"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","userID","placeholder","UserID"],["nzErrorTip","Please input your Password!"],["nzPrefixIcon","lock"],["type","password","nz-input","","formControlName","password","placeholder","Password"],["nzPrefixIcon","safety"],["type","text","nz-input","","formControlName","checkCode","placeholder","\u9a8c\u8bc1\u7801"],["id","check-code-img","src","","width","95px","height","36px"],["nz-row","",1,"login-form-margin"],["nz-col","",3,"nzSpan"],["nz-checkbox","","formControlName","remember"],[1,"login-form-forgot"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType"]],template:function(e,n){1&e&&(c.Zb(0,"div",0),c.Ub(1,"i",1),c.Mc(2,"\u7ba1\u7406\u5458\u767b\u9646"),c.Yb(),c.Zb(3,"form",2),c.hc("ngSubmit",(function(){return n.submitForm()})),c.Zb(4,"nz-form-item"),c.Zb(5,"nz-form-control",3),c.Zb(6,"nz-input-group",4),c.Ub(7,"input",5),c.Yb(),c.Yb(),c.Yb(),c.Zb(8,"nz-form-item"),c.Zb(9,"nz-form-control",6),c.Zb(10,"nz-input-group",7),c.Ub(11,"input",8),c.Yb(),c.Yb(),c.Yb(),c.Zb(12,"nz-form-item"),c.Zb(13,"nz-form-control"),c.Zb(14,"nz-input-group",9),c.Ub(15,"input",10),c.Mc(16," \xa0"),c.Ub(17,"img",11),c.Yb(),c.Yb(),c.Yb(),c.Zb(18,"div",12),c.Zb(19,"div",13),c.Zb(20,"label",14),c.Zb(21,"span"),c.Mc(22,"\u8bb0\u4f4f\u5bc6\u7801"),c.Yb(),c.Yb(),c.Yb(),c.Zb(23,"div",13),c.Zb(24,"a",15),c.Mc(25,"\u5fd8\u8bb0\u5bc6\u7801\uff1f"),c.Yb(),c.Yb(),c.Yb(),c.Zb(26,"button",16),c.Mc(27,"\u767b\u9646"),c.Yb(),c.Yb()),2&e&&(c.Db(3),c.sc("nzAutoTips",n.autoTips)("formGroup",n.validateForm),c.Db(16),c.sc("nzSpan",12),c.Db(4),c.sc("nzSpan",12),c.Db(3),c.sc("nzType","primary"))},directives:[h.a,Z.a,x.p,x.l,S.b,x.g,d.c,S.c,d.a,S.a,_.c,_.b,x.c,x.k,x.f,T.a,M.a,U.a],styles:[".login-form[_ngcontent-%COMP%]{max-width:300px;margin:auto}.login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-forgot[_ngcontent-%COMP%]{float:right}.login-form-button[_ngcontent-%COMP%]{width:100%}.login-title[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:20px;margin-top:16px;margin-bottom:16px}button[_ngcontent-%COMP%]{background-color:brown}#check-code-img[_ngcontent-%COMP%]{margin:-5px -12px}"]}),R)},{path:"**",redirectTo:"404"}]}],j=((X=function e(){_classCallCheck(this,e)}).\u0275mod=c.Rb({type:X}),X.\u0275inj=c.Qb({factory:function(e){return new(e||X)},imports:[[s.g.forChild(G)],s.g]}),X),K=t("PMIT"),B=t("oz47"),Q=((E=function e(){_classCallCheck(this,e)}).\u0275mod=c.Rb({type:E}),E.\u0275inj=c.Qb({factory:function(e){return new(e||E)},imports:[[j,a.c,K.a,B.a,x.h,x.n]]}),E)},rIdH:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var o=t("3Pt+"),r=function(e){_inherits(t,e);var n=_createSuper(t);function t(){return _classCallCheck(this,t),n.apply(this,arguments)}return _createClass(t,null,[{key:"minLengthUsername",value:function(e){return function(n){return null===o.o.minLength(e)(n)?null:n.value.replace(/[^\x00-\xff]/g,"xx").length<e?{minlength:{"zh-cn":"\u4e2d\u6587\u6700\u5c0f\u957f\u5ea6\u4e3a".concat(e/2,", \u82f1\u6587\u6216\u5b57\u7b26\u6700\u5c0f\u957f\u5ea6\u4e3a").concat(e),en:"Chinese minLength is ".concat(e/2,", English or character minLength is").concat(e)}}:void 0}}},{key:"maxLengthUsername",value:function(e){return function(n){return null===o.o.maxLength(e)(n)?null:n.value.replace(/[^\x00-\xff]/g,"xx").length>e?{maxlength:{"zh-cn":"\u4e2d\u6587\u6700\u5927\u957f\u5ea6\u4e3a".concat(e/2,", \u82f1\u6587\u6216\u5b57\u7b26\u6700\u5927\u957f\u5ea6\u4e3a").concat(e),en:"Chinese maxLength is ".concat(e/2,", English or character maxLength is").concat(e)}}:void 0}}},{key:"minLengthPassword",value:function(e){return function(n){return null===o.o.minLength(e)(n)?null:n.value.replace(/[^\x00-\xff]/g,"xx").length<e?{minlength:{"zh-cn":"\u5bc6\u7801\u6700\u5c0f\u957f\u5ea6\u4e3a".concat(e),en:"Password minLength is".concat(e)}}:void 0}}},{key:"maxLengthPassword",value:function(e){return function(n){return null===o.o.maxLength(e)(n)?null:n.value.replace(/[^\x00-\xff]/g,"xx").length>e?{maxlength:{"zh-cn":"\u5bc6\u7801\u6700\u5927\u957f\u5ea6\u4e3a".concat(e),en:"Password maxLength is".concat(e)}}:void 0}}},{key:"mobile",value:function(e){var n=e.value;return function(e){return null==e||0===e.length}(n)||function(e){return"string"==typeof e&&/(^1\d{10}$)/.test(e)}(n)?null:{mobile:{"zh-cn":"\u624b\u673a\u53f7\u7801\u683c\u5f0f\u4e0d\u6b63\u786e",en:"Mobile phone number is not valid"}}}},{key:"max",value:function(e){return function(n){return null===o.o.max(e)(n)?null:{maxlength:{"zh-cn":"\u6700\u5927\u503c\u4e3a ".concat(e),en:"MaxLength is ".concat(e)}}}}},{key:"min",value:function(e){return function(n){return null===o.o.min(e)(n)?null:{maxlength:{"zh-cn":"\u6700\u5c0f\u503c\u4e3a ".concat(e),en:"MinLength is ".concat(e)}}}}}]),t}(o.o)}}]);